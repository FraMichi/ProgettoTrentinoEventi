{"openapi":"3.0.0","info":{"title":"Trentino Eventi","description":"Applicazione che mostra eventi ed alloggi in Trentino","version":"1.0.0"},"servers":{"url":{"http":"//localhost:8080/","description":"Localhost"}},"paths":{"/api/v1/authentication/login":{"post":{"description":"Controlla se l utente esiste e in caso affermativo fa il login","summary":"Fa il login se l utente esiste","tags":["authentication"],"requestBody":{"content":{"application/json":{"schema":{"properties":{"email":{"type":"string","description":"Indirizzo email dell utente"},"password":{"type":"string","description":"Password dell utente"}}}}}},"responses":{"200":{"description":"Utente esiste, aggiunge il token, la sua data di scadenza, il nome dell utente e l id alla response o password errata restituisce messaggio","content":{"application/json":{"schema":{"properties":{"success":{"type":"boolean","description":"Vale true se non ci sono stati errori, false se la password è sbagliata"},"message":{"type":"string","description":"Messaggio che contiene info specifiche"},"token":{"type":"string","description":"Token criptato che contiene info relative all'utente"},"name":{"type":"string","description":"Nome utente"},"id":{"type":"string","description":"Id utente"},"expireTime":{"type":"number","description":"Tempo di validità del token espresso in secondi"}}}}}},"400":{"description":"Restituisce errore se non sono stati inseriti tutti i campi!","content":{"application/json":{"schema":{"properties":{"success":{"type":"boolean","description":"Vale false"},"message":{"type":"string","description":"Messaggio che contiene l'errore"}}}}}},"404":{"description":"Restituisce errore utente non trovato!","content":{"application/json":{"schema":{"properties":{"success":{"type":"boolean","description":"Vale false ed indica che ci sono stati errori"},"message":{"type":"string","description":"Messaggio che contiene l'errore"}}}}}}}}},"/api/v1/authentication/subscribe":{"post":{"description":"Controlla se l utente esiste e in caso non affermativo lo iscrive, aggiunge il cookie contentente il token, il nome dell utente e l id alla response","summary":"Fa la registazione se l utente non esiste","tags":["authentication"],"requestBody":{"content":{"application/json":{"schema":{"properties":{"name":{"type":"string","description":"Nome dell utente"},"surname":{"type":"string","description":"Cognome dell utente"},"birthdate":{"type":"string","description":"Data di nascita dell utente"},"userType":{"type":"string","description":"Tipo di utente"},"email":{"type":"string","description":"Indirizzo email dell utente"},"password":{"type":"string","description":"Password di utente"}}}}}},"responses":{"200":{"description":"Registrazione avvenuta correttamente","content":{"application/json":{"schema":{"properties":{"success":{"type":"boolean","description":"Vale true se non ci sono stati errori, false se la password è sbagliata"},"token":{"type":"string","description":"Token criptato che contiene info relative all'utente"},"name":{"type":"string","description":"Nome utente"},"id":{"type":"string","description":"Id utente"},"expireTime":{"type":"number","description":"Tempo di validità del token espresso in secondi"}}}}}},"400":{"description":"Restituisce errori in caso di campi non inseriti, formato data o email non corretto, o tipo di utente non corretto","content":{"application/json":{"schema":{"properties":{"success":{"type":"boolean","description":"Vale false"},"message":{"type":"string","description":"Messaggio che contiene l'errore"}}}}}},"404":{"description":"Restituisce errore utente gia esistente!","content":{"application/json":{"schema":{"properties":{"success":{"type":"boolean","description":"Vale false ed indica che ci sono stati errori"},"message":{"type":"string","description":"Messaggio che contiene l'errore"}}}}}}}}},"/api/v1/authentication/checkIfLogged":{"post":{"description":"Controlla se l utente e gia loggato","summary":"Controlla se utente loggato","tags":["authentication"],"requestBody":{"content":{"application/json":{"schema":{"properties":{"token":{"type":"string","description":"Contiene il token"}}}}}},"responses":{"200":{"description":"Utente gia loggato","content":{"application/json":{"schema":{"properties":{"success":{"type":"boolean","description":"Vale true ed indica che non ci sono stati errori"},"message":{"type":"string","description":"Messaggio che contiene un messaggio di successo"}}}}}},"404":{"description":"Restituisce errori cookie non trovato e token non valido","content":{"application/json":{"schema":{"properties":{"success":{"type":"boolean","description":"Vale false ed indica che ci sono stati errori"},"message":{"type":"string","description":"Messaggio che contiene l'errore"}}}}}}}}},"/api/v1/authentication/checkIfGestore":{"post":{"description":"Controlla se l utente e un gestore per permettere la creazione di eventi e alloggi","summary":"Controlla se utente gestore","tags":["authentication"],"requestBody":{"content":{"application/json":{"schema":{"properties":{"token":{"type":"string","description":"Contiene il token"}}}}}},"responses":{"200":{"description":"è stato controllato che l'utente è un gestore e quindi si può proseguire con la creazione dell'evento/alloggio","content":{"application/json":{"schema":{"properties":{"success":{"type":"boolean","description":"Vale true dato che l'utente è un gestore"},"message":{"type":"string","description":"Messaggio che contiene un messaggio di successo"},"category":{"type":"string","description":"Contiene la categoria dell'utente"}}}}}},"404":{"description":"Restituisce errore utente turista!","content":{"application/json":{"schema":{"properties":{"success":{"type":"boolean","description":"Vale false ed indica che ci sono stati errori"},"message":{"type":"string","description":"Messaggio che contiene l'errore"}}}}}}}}},"/api/v1/visualizzazione/eventList":{"get":{"description":"Gets the list of all events","summary":"View all events","tags":["eventVisualization"],"responses":{"200":{"description":"Collection of events in JSON format","content":{"application/json":{"schema":{"properties":{"id":{"type":"string","description":"string that identifies the event"},"title":{"type":"string","description":"title of the event"}}}}}}}}},"/api/v1/visualizzazione/housingList":{"get":{"description":"Gets the list of all housings","summary":"View all housings","tags":["housingVisualization"],"responses":{"200":{"description":"Collection of housings in JSON format","content":{"application/json":{"schema":{"properties":{"id":{"type":"string","description":"string that identifies the housing"},"title":{"type":"string","description":"title of the housing"}}}}}}}}},"/api/v1/visualizzazione/event":{"get":{"description":"Gets the details of a specific event","summary":"Details of one event","tags":["eventVisualization"],"parameters":[{"in":"query","name":"id","type":"string","description":"The id of the specific event you want to get the details","required":true}],"responses":{"200":{"description":"Details of an event in JSON format","content":{"application/json":{"schema":{"properties":{"title":{"type":"string","description":"title of the event"},"description":{"type":"string","description":"description of the event"},"initDate":{"type":"string","description":"date of the beginning of the event in ISO8601 format"},"finlDate":{"type":"string","description":"date of the ending of the event in ISO8601 format"},"address":{"type":"string","description":"address of the event"},"city":{"type":"string","description":"city where the event takes place"},"seatsAvailable":{"type":"integer","description":"seats still available for the event"},"seatsOccupied":{"type":"number","description":"seats already occupied for the event"},"category":{"type":"string","description":"the category of the event"},"creatorName":{"type":"string","description":"the name of the user who created the event"},"creatorSurname":{"type":"string","description":"the surname of the user who created the event"},"creatorEmail":{"type":"string","description":"the email of the user who created the event"}}}}}},"400":{"description":"The Id query parameter is not present or do not respect the MongoDB format","content":{"application/json":{"schema":{"properties":{"success":{"type":"boolean"},"message":{"type":"string","description":"specifications regarding the specific error"}}}}}},"404":{"description":"Some data are not found on the DB","content":{"application/json":{"schema":{"properties":{"success":{"type":"boolean"},"message":{"type":"string","description":"specifications regarding the specific error"}}}}}}}}},"/api/v1/visualizzazione/housing":{"get":{"description":"Gets the details of a specific housing","summary":"Details of one housing","tags":["housingVisualization"],"parameters":[{"in":"query","name":"id","type":"string","description":"The id of the specific housing you want to get the details","required":true}],"responses":{"200":{"description":"Details of a housing in JSON format","content":{"application/json":{"schema":{"properties":{"title":{"type":"string","description":"title of the housing"},"description":{"type":"string","description":"description of the housing"},"initDate":{"type":"string","description":"date of the beginning of the housing availability slot in ISO8601 format"},"finlDate":{"type":"string","description":"date of the ending of the housing availability slot in ISO8601 format"},"address":{"type":"string","description":"address of the housing"},"city":{"type":"string","description":"city where the housing is located"},"creatorName":{"type":"string","description":"the name of the user who created the housing"},"creatorSurname":{"type":"string","description":"the surname of the user who created the housing"},"creatorEmail":{"type":"string","description":"the email of the user who created the housing"}}}}}},"400":{"description":"The Id query parameter is not present or do not respect the MongoDB format","content":{"application/json":{"schema":{"properties":{"success":{"type":"boolean"},"message":{"type":"string","description":"specifications regarding the specific error"}}}}}},"404":{"description":"Some data are not found on the DB","content":{"application/json":{"schema":{"properties":{"success":{"type":"boolean"},"message":{"type":"string","description":"specifications regarding the specific error specific error"}}}}}}}}},"/api/v1/eventSubscription/eventSubcribable":{"post":{"description":"Controlla se l'utente è iscritto ad un evento specifico","summary":"Controlla l'iscrizione di un utente ad un evento","tags":["eventSubscription"],"requestBody":{"content":{"application/json":{"schema":{"properties":{"token":{"type":"string","description":"Token che rappresenta l'utente loggato","required":true},"event":{"type":"string","description":"Id dell'evento","required":true}}}}}},"responses":{"200":{"description":"Richiesta completata con successo","content":{"application/json":{"schema":{"properties":{"success":{"type":"boolean"},"message":{"type":"string","description":"UserNotSubscribed => l'utente non è iscritto all'evento\n\nUserSubscribed => l'utente è già iscritto all'evento\n"}}}}}},"400":{"description":"L'id specificato non rispetta il formato mongoDB","content":{"application/json":{"schema":{"properties":{"success":{"type":"boolean"},"message":{"type":"string","description":"MongoDBFormatException => l'id specificato non rispetta il formato mongoDB\n"}}}}}},"401":{"description":"L'utente non è loggato","content":{"application/json":{"schema":{"properties":{"success":{"type":"boolean"},"message":{"type":"string","description":"UserNotLogged => il token fornito non è valido\n"}}}}}},"404":{"description":"L'evento richiesto non è stato trovato nel DB","content":{"application/json":{"schema":{"properties":{"success":{"type":"boolean"},"message":{"type":"string","description":"EventNotFound => l'evento specifico non esiste nel DB\n"}}}}}}}}},"/api/v1/eventSubscription/createSubscription":{"post":{"description":"Effettua l'iscrizione dell'utente all'evento specifico","summary":"Iscrizione utente a evento","tags":["eventSubscription"],"requestBody":{"content":{"application/json":{"schema":{"properties":{"token":{"type":"string","description":"Token che rappresenta l'utente","required":true},"event":{"type":"string","description":"Id dell'evento","required":true}}}}}},"responses":{"200":{"description":"Richiesta completata con successo, ma non è stata creata una nuova entry nel DB","content":{"application/json":{"schema":{"properties":{"success":{"type":"boolean","description":"NoFreeSeats => false\n\nUserAlreadySubscribed => true\n"},"message":{"type":"string","description":"NoFreeSeats => l'evento non ha posti liberi, iscrizione annullata\n\nUserAlreadySubscribed => l'utente è già iscritto all'evento\n"}}}}}},"201":{"description":"Richiesta completata con successo, nuova entry creata nel DB","content":{"application/json":{"schema":{"properties":{"success":{"type":"boolean","description":"UserSubscribed => true\n"},"message":{"type":"string","description":"UserSubscribed => l'utente è stato iscritto all'evento\n"}}}}}},"400":{"description":"L'id specificato non rispetta il formato mongoDB","content":{"application/json":{"schema":{"properties":{"success":{"type":"boolean"},"message":{"type":"string","description":"MongoDBFormatException => l'id specificato non rispetta il formato mongoDB\n"}}}}}},"401":{"description":"L'utente non è loggato","content":{"application/json":{"schema":{"properties":{"success":{"type":"boolean","description":"UserNotLogged => false\n"},"message":{"type":"string","description":"UserNotLogged => il token fornito non è valido\n"}}}}}},"404":{"description":"L'evento richiesto non è stato trovato nel DB","content":{"application/json":{"schema":{"properties":{"success":{"type":"boolean"},"message":{"type":"string","description":"EventNotFound => l'evento specifico non esiste nel DB\n"}}}}}}}}},"/api/v1/housingSubscription/getHousingSlots":{"post":{"description":"List all the subscription slots of a given housing","summary":"List housing subscription slots","tags":["housingSubscription"],"requestBody":{"content":{"application/json":{"schema":{"properties":{"token":{"type":"string","description":"The token that rapresent the logged user"},"id":{"type":"string","description":"The id of the specific housing"}}}}}},"responses":{"200":{"description":"Request successful, the response contains a collection of subscription slot in the following JSON format","content":{"application/json":{"schema":{"properties":{"init":{"type":"Date","description":"Initial date of the specific prenotation slot in ISO8601 format"},"finl":{"type":"Date","description":"Final date of the spacific prenotation slot in ISO8601 format"},"free":{"type":"boolean","description":"true => the specific slot is free\n\nfalse => the specific slot is already occupied, therefore is not subscribable\n"},"ofUser":{"type":"boolean","description":"true => the specific slot is already taken by the user identified by the token provided\n\nfalse => the specific slot is already occupied, but not by the user identified by the token provided\n"}}}}}},"400":{"description":"The format of the housing id do not respect the standard format of MongoDB's id","content":{"application/json":{"schema":{"properties":{"success":{"type":"boolean","description":"the value is always false"},"message":{"type":"string","description":"MongoDBFormatException"}}}}}},"404":{"description":"The specific housing was not found in the DB","content":{"application/json":{"schema":{"properties":{"success":{"type":"boolean","description":"always false"},"message":{"type":"string","description":"HousingNotFound"}}}}}}}}},"/api/v1/housingSubscription/subscribeHousing":{"post":{"description":"Require to create a subscription of a given user to a given housing","summary":"Subscribe user to housing","tags":["housingSubscription"],"requestBody":{"content":{"application/json":{"schema":{"properties":{"token":{"type":"string","description":"The token that rapresent the logged user"},"id":{"type":"string","description":"The id of the specific housing"}}}}}},"responses":{"200":{"description":"Request successful was successful, but the new subscription has not been created. Check the message for more info","content":{"application/json":{"schema":{"properties":{"succes":{"type":"boolean","description":"Always false"},"message":{"type":"string","description":"BadDateOrder => the initial date is greater than the final date\n\nBadDateOffset => the slot required exits from the availability slot of the housing\n\nDateSlotOverlap => the slot required overlaps another slot already occupied\n"}}}}}},"201":{"description":"The subscription to the housing has been correctly created","content":{"application/json":{"schema":{"properties":{"success":{"type":"boolean","description":"always true"},"message":{"type":"string","description":"UserSubscribed"}}}}}},"400":{"description":"The format of the housing id do not respect the standard format of MongoDB's id","content":{"application/json":{"schema":{"properties":{"success":{"type":"boolean","description":"always false"},"message":{"type":"string","description":"MongoDBFormatException"}}}}}},"401":{"description":"The token provided is not valid (login again to get a new one)","content":{"application/json":{"schema":{"properties":{"success":{"type":"boolean","description":"always false"},"message":{"type":"string","description":"TokenNotValid"}}}}}},"404":{"description":"The specific housing was not found in the DB","content":{"application/json":{"schema":{"properties":{"success":{"type":"boolean","description":"always false"},"message":{"type":"string","description":"HousingNotFound"}}}}}}}}},"/api/v1/accommodation/create":{"post":{"description":"Controlla se le informazioni inserite nel form sono corrette e crea il nuovo alloggio caricandolo nel DB","summary":"Crea un nuovo alloggio","tags":["accommodation"],"requestBody":{"content":{"application/json":{"schema":{"properties":{"name":{"type":"string","description":"Contiene il nome dell'alloggio"},"description":{"type":"string","description":"Contiene la descrizione dell'alloggio"},"dstart":{"type":"date","description":"Contiene la data di inizio disponibilità dell'alloggio"},"dend":{"type":"data","description":"Contiene la data di fine disponibilità dell'alloggio"},"address":{"type":"string","description":"Contiene l'indirizzo dell'alloggio"},"city":{"type":"string","description":"Contiene la città in cui si trova l'alloggio"},"idUser":{"type":"string","description":"Contiene l'id del gestore che ha creato l'alloggio"}}}}}},"responses":{"200":{"description":"sono stati controllati tutti i campi e non sono stati trovati errori, si procede con il caricamento dell'alloggio sul DB","content":{"application/json":{"schema":{"properties":{"success":{"type":"boolean","description":"Vale true dato che tutti i campi sono corretti"},"message":{"type":"string","description":"Messaggio che contiene un messaggio di successo"}}}}}},"400":{"description":"Restituisce errore se non sono stati inseriti tutti i campi o se non sono corretti!","content":{"application/json":{"schema":{"properties":{"success":{"type":"boolean","description":"Vale false ed indica che ci sono stati errori"},"message":{"type":"string","description":"Messaggio che contiene l'errore"}}}}}}}}},"/api/v1/event/create":{"post":{"description":"Controlla se le informazioni inserite nel form sono corrette e crea il nuovo evento caricandolo nel DB","summary":"Crea un nuovo evento","tags":["eventCreation"],"requestBody":{"content":{"application/json":{"schema":{"properties":{"name":{"type":"string","description":"Contiene il nome dell'evento"},"description":{"type":"string","description":"Contiene la descrizione dell'evento"},"dstart":{"type":"Date","description":"Contiene la data di inizio disponibilità dell'evento"},"dend":{"type":"Date","description":"Contiene la data di fine disponibilità dell'evento"},"address":{"type":"string","description":"Contiene l'indirizzo dell'evento"},"city":{"type":"string","description":"Contiene la città in cui si trova l'evento"},"total":{"type":"number","description":"Contiene il numero di utenti totali che si possono iscrivere all'evento"},"idCategoria":{"type":"string","description":"Contiene l'id della categoria dell'evento"},"idUser":{"type":"string","description":"Contiene l'id del gestore che ha creato l'evento"}}}}}},"responses":{"200":{"description":"sono stati controllati tutti i campi e non sono stati trovati errori, si procede con il caricamento dell'evento sul DB","content":{"application/json":{"schema":{"properties":{"success":{"type":"boolean","description":"Vale true dato che tutti i campi sono corretti"},"message":{"type":"string","description":"Messaggio che contiene un messaggio di successo"}}}}}},"400":{"description":"Restituisce errore se non sono stati inseriti tutti i campi o se non sono corretti!","content":{"application/json":{"schema":{"properties":{"success":{"type":"boolean","description":"Vale false ed indica che ci sono stati errori"},"message":{"type":"string","description":"Messaggio che contiene l'errore"}}}}}}}}},"/api/v1/event/category":{"post":{"description":"Ottieni lista di categorie degli eventi","summary":"Lista categorie eventi","tags":["eventCategory"],"responses":{"200":{"description":"Collezione di categorie in formato JSON","content":{"application/json":{"schema":{"properties":{"id":{"type":"string","description":"id della categoria"},"title":{"type":"string","description":"nome della categoria"}}}}}}}}},"/api/v2/getCreatedEntries/getCreatedEvents":{"post":{"description":"Dato il token del gestore ritorna la lista di tutti gli eventi caricati, solo gli utenti di tipo gestore possono visualizzare gli eventi che hanno caricato","summary":"Ottieni lista eventi caricati","tags":["getCreatedEntries"],"requestBody":{"content":{"application/json":{"schema":{"properties":{"token":{"type":"string","description":"Token che rappresenta l'utente loggato"}}}}}},"responses":{"200":{"description":"Viene restituita una lista in formato JSON degli eventi creati dal gestore specifico. Ogni oggetto rispetta il seguente formato","content":{"application/json":{"schema":{"properties":{"id":{"type":"string","description":"Id dell'evento"},"title":{"type":"string","description":"Titolo dell'evento"},"descr":{"type":"string","description":"Descrizione dell'evento"},"init":{"type":"string","description":"Data di inizio dell'evento"},"finl":{"type":"string","description":"Data di fine dell'evento"},"addrs":{"type":"string","description":"Indirizzo dell'evento"},"seats":{"type":"number","description":"Numero di posti ancora disponibili"},"allSt":{"type":"number","description":"Numero di posti totali"},"categ":{"type":"string","description":"Categoria dell'evento"}}}}}},"401":{"description":"Il token fornito non è valido","content":{"application/json":{"schema":{"properties":{"success":{"type":"boolean","description":"Sempre false"},"message":{"type":"string","description":"TokenNotValid"}}}}}},"403":{"description":"Il token fornito rappresenta un utente NON gestore","content":{"application/json":{"schema":{"properties":{"success":{"type":"boolean","description":"Sempre false"},"message":{"type":"string","description":"BadUserType"}}}}}}}}},"/api/v2/getCreatedEntries/getCreatedHousings":{"post":{"description":"Dato il token del gestore, ritorna la lista di tutti gli alloggi caricati, solo gli utenti di tipo gestore possono visualizzare gli alloggi che hanno caricato","summary":"Ottieni lista alloggi caricati","tags":["getCreatedEntries"],"requestBody":{"content":{"application/json":{"schema":{"properties":{"token":{"type":"string","description":"Token che rappresenta l'utente loggato"}}}}}},"responses":{"200":{"description":"Viene restituita una lista in formato JSON degli eventi creati dal gestore specifico. Ogni oggetto rispetta il seguente formato","content":{"application/json":{"schema":{"properties":{"id":{"type":"string","description":"Id dell'alloggio"},"title":{"type":"string","description":"Titolo dell'alloggio"},"descr":{"type":"string","description":"Descrizione dell'alloggio"},"init":{"type":"string","description":"Data di inizio disponibilità dell'alloggio"},"finl":{"type":"string","description":"Data di fine disponibilità dell'alloggio"},"addrs":{"type":"string","description":"Indirizzo dell'alloggio"},"city":{"type":"string","description":"Città dove si trova l'alloggio"}}}}}},"401":{"description":"Il token fornito non è valido","content":{"application/json":{"schema":{"properties":{"success":{"type":"boolean","description":"Sempre false"},"message":{"type":"string","description":"TokenNotValid"}}}}}},"403":{"description":"Il token fornito rappresenta un utente NON gestore","content":{"application/json":{"schema":{"properties":{"success":{"type":"boolean","description":"Sempre false"},"message":{"type":"string","description":"BadUserType"}}}}}}}}},"/api/v2/visualizzazione/houseList":{"post":{"description":"Elenca tutti gli alloggi a cui l utente si e iscritto","summary":"Lista di alloggi prenotati","tags":["visualizzazioneSubHouseList"],"requestBody":{"content":{"application/json":{"schema":{"properties":{"token":{"type":"string","description":"Token che rappresenta l'utente loggato"}}}}}},"responses":{"200":{"description":"Risultato ottenuto, la risposta contiene una lista degli alloggi prenotati in formato JSON","content":{"application/json":{"schema":{"properties":{"success":{"type":"boolean","description":"true => la lista è piena, ci sono prenotazioni\n\nfalse => la lista è vuota, non ci sono prenotazioni\n"}}}}}},"401":{"description":"L'utente non è autenticato","content":{"application/json":{"schema":{"properties":{"success":{"type":"boolean","description":"vale sempre false"},"message":{"type":"string","description":"Messaggio che contiene l'errore"}}}}}}}}},"/api/v2/visualizzazione/eventList":{"post":{"description":"Elenca tutti gli eventi a cui l utente si e iscritto","summary":"Lista di eventi prenotati","tags":["visualizzazioneSubEventList"],"requestBody":{"content":{"application/json":{"schema":{"properties":{"token":{"type":"string","description":"Token che rappresenta l'utente loggato"}}}}}},"responses":{"200":{"description":"Risultato ottenuto, la risposta contiene una lista degli eventi prenotati in formato JSON","content":{"application/json":{"schema":{"properties":{"success":{"type":"boolean","description":"true => la lista è piena, ci sono prenotazioni\n\nfalse => la lista è vuota, non ci sono prenotazioni\n"}}}}}},"401":{"description":"L'utente non è autenticato","content":{"application/json":{"schema":{"properties":{"success":{"type":"boolean","description":"vale sempre false"},"message":{"type":"string","description":"Messaggio che contiene l'errore"}}}}}}}}}},"components":{},"tags":[]}